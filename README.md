# GPG-Key
In this activity, you practiced using GPG to apply a real world application of public key cryptography, generating public and private keys and encrypting and decrypting secret messages with the appropriate keys.

This solution is an example of how to encrypt and decrypt with GPG.


The first step is to come up with an idea of how to capture an insider at the Hill Valley Police Department, and add it to a message in a file called secret_idea.txt.

You can use Vi, Nano, or echo to create this message.


The next step is to generate your public key:

gpg --gen-key


Validate your key has been generated:

gpg --list-keys


To export the public key in ASCII format:


gpg --armor --output [your name]_key.gpg --export [your email]


Update the command with your name and the email you used for generating the key.



Confirm the key has been generated by running:

more [your name]_key.gpg 


It should look similar to the following:
Note: This is a shortened example.
 -----BEGIN PGP PUBLIC KEY BLOCK-----

 oCN2AghQUDgu5yBVAmPAx7hatvcMBR1X6NqJN4wStLB21OvHdgT2VbiHUtwkGvbJ
 Hsui9eTR7bBY1YgP8PcGFjeMZ5+C7E94uYeksbwMzFWGE79M3kqEi1tgkDZTN/T8
 8O31qQUgDCCbUnuvpW5pYJ2BconeNBHAZNKSKg+9U3DfCazRpky89be6W7WtjDGs
 iFo5PEjBTvCJJXHvDgn2W7I7U0MWO220gyCT/Ja/eKad5GKTeMjOC4ERTwvha0ON

 -----END PGP PUBLIC KEY BLOCK-----


Send your key over to your partner using Slack.


You can send the whole file or copy and paste the message (including the -----BEGIN PGP PUBLIC KEY BLOCK----- and the -----END PGP PUBLIC KEY BLOCK-----).


If you receive text from your partner instead of a file, create a file called partner_key.gpg, add the whole message, and save the file.



With your partner's public key, import by running the following:

gpg --import [partner_key.gpg]


Encrypt your message with your partner's public key by running the following command:

gpg --output [your name]_secret_idea.txt.enc --encrypt --recipient [partner key] secret_idea.txt


Send the encrypted file [your name]_secret_idea.txt.enc to your partner.


When you receive your partner's encrypted file, save it in your local directory.

The goal of this activity was to practice using digital signatures with GPG, and to demonstrate that digital signatures can be used to send messages that are guaranteed to be authentic.

This solution is an example, as you will each have a different key and message. The following example demonstrates how to sign and verify a message with GPG.


First, write a message to a file using echo.


Nano or Vi can be used to create a message. The echo command is:

echo "This is an Urgent reminder by the security team of Hill Valley PD.  Please be sure to use GPG to sign and verify all messages" > Important_Communication_by_me.txt



Be sure to replace the word "me" with your name.




Sign the message with your private key and create an output file called Important_Communication_by_me.sig:

gpg --output Important_Communication_by_me.sig   --clearsign Important_Communication_by_me.txt



Run the script and display the clearsigned signature by running the following next command:


cat Important_Communication_by_me.sig


This should display the following:
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

This is an Urgent reminder by the security team of Hill Valley PD. 
Please be sure to use GPG to sign and verify all messages
-----BEGIN PGP SIGNATURE-----

iQGzBAEBCgAdFiEEYSlws2SzZx5pJqjYHX0Iu8WCN4gFAl4OBv8ACgkQHX0Iu8WC
N4gf/gv+PPq/qZhETpklzIjRpn620H2LpUIPqIEwqyoZ8A7WuLMTyJNjUpp6Q43T
ZnL8fcBj5c51AswFElI4tGbWASc/YUISZCv/hMZ2q126rbTZnfvVWGlIHEuNw1La
Ole3C7iRB845nFuY3YZGlKdr2a0X+M/SPEgvOnQP0MIYIfmCILz20ZxJjyn9H47d
lgAZiijoMMn1OvX60BcLxj5aov6K2YgMDw63z9Z/CB/+Ue2t+M1rm/A9zAQxRiNS
V3pdHHaBiDx3s3fieWmPR0/HJK8zUOpkzPs/SLZUkz0WZqvLv6RHE9Viab4YwjIP
ZCaMjSrkCVuq9KwbpWE6ZFdVT3Cq/dNgRRxTuCImoRA0XzLEwLpBQIbFBozlGM/p
ZDdzHOYkK5ZlnAF/rtmQOCVE5GFyipTXEsD2Sg4Tj52AdTl4JLKjRff5UlWsBW8D
qJgSybjnYOGaABMIVCTAoUMC4dxGoEbZxPZZFfZKoxNViTykFIuw3xvzG0vTYz5h
HEqplTYb
=skQM
-----END PGP SIGNATURE-----


This shows the plaintext message and the separate digital signature in the same file.




We will pretend that the message above is the one we received from our partner.

Since you should already have your partner's public key imported from the previous activity, we don't have to repeat that step.



Verify the message by running the following command:

gpg --verify Important_Communication_by_me.sig



The verification response should look similar to the following:


  gpg: Signature made Mon 09 Dec 2019 02:30:52 PM EST
  gpg:                using RSA key 39B2BD6C93E1E63E8C004183FE91AF7A7B4EC267
  gpg: Good signature from "me <metest.com>" [ultimate]


Decrypt the encrypted message with the following command:

gpg --output decrypted_message.txt --decrypt [your partner's name]_secret_idea.txt.enc



Preview the decrypted message and confirm with your partner this is the message they sent.
